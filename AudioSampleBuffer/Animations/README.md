# åŠ¨ç”»ç³»ç»Ÿé‡æ„è¯´æ˜

## ğŸ¯ é‡æ„ç›®æ ‡

å°†åŸæœ¬æ··ä¹±çš„åŠ¨ç”»ä»£ç åˆ†ç¦»åˆ°ä¸åŒçš„æ–‡ä»¶ä¸­ï¼Œå®ç°æ¨¡å—åŒ–å’Œå¯æ‰©å±•çš„åŠ¨ç”»æ•ˆæœç®¡ç†ã€‚

## ğŸ“ æ–°çš„æ¶æ„ç»“æ„

```
Animations/
â”œâ”€â”€ AnimationProtocol.h/m          # åŠ¨ç”»ç®¡ç†å™¨åŸºç±»å’Œåè®®
â”œâ”€â”€ GradientAnimationManager.h/m   # æ¸å˜åŠ¨ç”»ç®¡ç†å™¨
â”œâ”€â”€ RotationAnimationManager.h/m   # æ—‹è½¬åŠ¨ç”»ç®¡ç†å™¨
â”œâ”€â”€ SpectrumAnimationManager.h/m   # é¢‘è°±å“åº”åŠ¨ç”»ç®¡ç†å™¨
â”œâ”€â”€ ParticleAnimationManager.h/m   # ç²’å­åŠ¨ç”»ç®¡ç†å™¨
â”œâ”€â”€ AnimationCoordinator.h/m       # åŠ¨ç”»åè°ƒå™¨ï¼ˆç»Ÿä¸€ç®¡ç†ï¼‰
â””â”€â”€ README.md                      # æœ¬æ–‡æ¡£
```

## ğŸ”§ æ ¸å¿ƒç»„ä»¶

### 1. AnimationProtocol
- **åŠŸèƒ½**: å®šä¹‰æ‰€æœ‰åŠ¨ç”»ç®¡ç†å™¨çš„é€šç”¨åè®®å’ŒåŸºç±»
- **ä¸»è¦æ–¹æ³•**: `startAnimation`, `stopAnimation`, `pauseAnimation`, `resumeAnimation`
- **çŠ¶æ€ç®¡ç†**: `AnimationState` æšä¸¾ç®¡ç†åŠ¨ç”»çŠ¶æ€

### 2. GradientAnimationManager
- **åŠŸèƒ½**: ç®¡ç†å½©è™¹æ¸å˜è‰²å¾ªç¯åŠ¨ç”»
- **ç‰¹æ€§**: 
  - è‡ªåŠ¨é¢œè‰²å¾ªç¯
  - åå°æš‚åœ/æ¢å¤
  - å¯é…ç½®åŠ¨ç”»é€Ÿåº¦å’Œé¢œè‰²æ­¥æ•°
- **ä½¿ç”¨**: ç”¨äºèƒŒæ™¯åœ†ç¯çš„å½©è™¹è‰²æ¸å˜æ•ˆæœ

### 3. RotationAnimationManager
- **åŠŸèƒ½**: ç®¡ç†å„ç§æ—‹è½¬åŠ¨ç”»
- **ç‰¹æ€§**:
  - æ”¯æŒé¡ºæ—¶é’ˆ/é€†æ—¶é’ˆ/äº¤æ›¿æ—‹è½¬
  - å¯é…ç½®æ—‹è½¬åœˆæ•°å’ŒæŒç»­æ—¶é—´
  - æ”¯æŒæ‰¹é‡ç®¡ç†å¤šä¸ªè§†å›¾/å›¾å±‚
- **ä½¿ç”¨**: ç”¨äºèƒŒæ™¯åœ†ç¯ã€å°é¢å›¾ç‰‡çš„æ—‹è½¬æ•ˆæœ

### 4. SpectrumAnimationManager
- **åŠŸèƒ½**: ç®¡ç†åŸºäºéŸ³é¢‘é¢‘è°±æ•°æ®çš„å“åº”åŠ¨ç”»
- **ç‰¹æ€§**:
  - ç¼©æ”¾ã€é˜´å½±ã€èƒŒæ™¯è‰²åŠ¨ç”»
  - åŸºäºé¢‘è°±å¼ºåº¦çš„åŠ¨ç”»è§¦å‘
  - å¯é…ç½®åŠ¨ç”»é˜ˆå€¼å’Œå¼ºåº¦
- **ä½¿ç”¨**: ç”¨äºé¢‘è°±å¯è§†åŒ–çš„åŠ¨æ€æ•ˆæœ

### 5. ParticleAnimationManager
- **åŠŸèƒ½**: ç®¡ç†ç²’å­åŠ¨ç”»ç³»ç»Ÿ
- **ç‰¹æ€§**:
  - åŸºäºéŸ³é¢‘å°é¢çš„ç²’å­æ•ˆæœ
  - å¯é…ç½®ç²’å­å‚æ•°ï¼ˆé€Ÿåº¦ã€ç”Ÿå‘½å‘¨æœŸã€ç¼©æ”¾ç­‰ï¼‰
  - æ”¯æŒåŠ¨æ€æ›´æ¢ç²’å­å›¾åƒ
- **ä½¿ç”¨**: ç”¨äºéŸ³é¢‘å°é¢çš„é£˜è½ç²’å­æ•ˆæœ

### 6. AnimationCoordinator
- **åŠŸèƒ½**: ç»Ÿä¸€åè°ƒå’Œç®¡ç†æ‰€æœ‰åŠ¨ç”»æ•ˆæœ
- **ç‰¹æ€§**:
  - æä¾›ç®€å•çš„ç»Ÿä¸€æ¥å£
  - å¤„ç†åº”ç”¨ç”Ÿå‘½å‘¨æœŸäº‹ä»¶
  - ç®¡ç†åŠ¨ç”»ä¹‹é—´çš„åè°ƒ
- **ä½¿ç”¨**: ä½œä¸ºä¸»è¦çš„åŠ¨ç”»æ§åˆ¶å…¥å£

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### åŸºæœ¬ä½¿ç”¨

```objc
// 1. åˆ›å»ºåŠ¨ç”»åè°ƒå™¨
self.animationCoordinator = [[AnimationCoordinator alloc] initWithContainerView:self.view];

// 2. è®¾ç½®å„ç§åŠ¨ç”»ç»„ä»¶
[self.animationCoordinator setupGradientLayer:gradientLayer];
[self.animationCoordinator setupSpectrumContainerView:spectrumContainer];
[self.animationCoordinator setupParticleContainerLayer:particleLayer];

// 3. æ·»åŠ æ—‹è½¬åŠ¨ç”»
[self.animationCoordinator addRotationViews:@[imageView] 
                                  rotations:@[@(-6.0)] 
                                  durations:@[@(120.0)] 
                              rotationTypes:@[@(RotationTypeCounterClockwise)]];

// 4. å¯åŠ¨æ‰€æœ‰åŠ¨ç”»
[self.animationCoordinator startAllAnimations];
```

### æ›´æ–°åŠ¨ç”»

```objc
// æ›´æ–°é¢‘è°±åŠ¨ç”»
[self.animationCoordinator updateSpectrumAnimations:spectrumData];

// æ›´æ–°ç²’å­å›¾åƒ
[self.animationCoordinator updateParticleImage:newImage];
```

### ç”Ÿå‘½å‘¨æœŸç®¡ç†

```objc
// åº”ç”¨è¿›å…¥åå°
[self.animationCoordinator applicationDidEnterBackground];

// åº”ç”¨å›åˆ°å‰å°
[self.animationCoordinator applicationDidBecomeActive];
```

## âœ¨ æ‰©å±•åŠ¨ç”»æ•ˆæœ

### 1. åˆ›å»ºæ–°çš„åŠ¨ç”»ç®¡ç†å™¨

```objc
// ç»§æ‰¿åŸºç±»
@interface CustomAnimationManager : BaseAnimationManager
// å®ç°è‡ªå®šä¹‰åŠ¨ç”»é€»è¾‘
@end
```

### 2. æ·»åŠ åˆ°åè°ƒå™¨

```objc
// åœ¨AnimationCoordinatorä¸­æ·»åŠ æ–°çš„ç®¡ç†å™¨
@property (nonatomic, strong) CustomAnimationManager *customManager;

// åœ¨ç›¸å…³æ–¹æ³•ä¸­è°ƒç”¨æ–°ç®¡ç†å™¨
- (void)startAllAnimations {
    [self.customManager startAnimation];
    // ...å…¶ä»–åŠ¨ç”»
}
```

### 3. é…ç½®åŠ¨ç”»å‚æ•°

```objc
// ä½¿ç”¨å‚æ•°å­—å…¸é…ç½®åŠ¨ç”»
[animationManager setAnimationParameters:@{
    @"duration": @(2.0),
    @"intensity": @(1.5),
    @"customProperty": @"customValue"
}];
```

## ğŸ¨ åŠ¨ç”»æ•ˆæœç±»å‹

### æ¸å˜åŠ¨ç”»
- å½©è™¹è‰²å¾ªç¯
- å¯é…ç½®é¢œè‰²æ­¥æ•°å’Œé€Ÿåº¦
- è‡ªåŠ¨é¢œè‰²ç§»ä½æ•ˆæœ

### æ—‹è½¬åŠ¨ç”»
- è¿ç»­æ—‹è½¬
- å¯é…ç½®æ–¹å‘å’Œé€Ÿåº¦
- æ”¯æŒå¤šå›¾å±‚åŒæ­¥

### é¢‘è°±å“åº”åŠ¨ç”»
- åŸºäºéŸ³é¢‘æ•°æ®çš„å®æ—¶å“åº”
- ç¼©æ”¾ã€é˜´å½±ã€é¢œè‰²å˜åŒ–
- å¯é…ç½®è§¦å‘é˜ˆå€¼

### ç²’å­åŠ¨ç”»
- åŸºäºéŸ³é¢‘å°é¢çš„ç²’å­ç³»ç»Ÿ
- ç‰©ç†æ•ˆæœï¼ˆé‡åŠ›ã€é€Ÿåº¦ã€æ—‹è½¬ï¼‰
- åŠ¨æ€å›¾åƒæ›´æ¢

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–

1. **æ‰¹é‡åŠ¨ç”»å¤„ç†**: ä½¿ç”¨ `CATransaction` æ‰¹é‡å¤„ç†åŠ¨ç”»
2. **åå°æš‚åœ**: åº”ç”¨è¿›å…¥åå°æ—¶è‡ªåŠ¨æš‚åœåŠ¨ç”»
3. **å†…å­˜ç®¡ç†**: åˆç†çš„å¯¹è±¡ç”Ÿå‘½å‘¨æœŸç®¡ç†
4. **ç¡¬ä»¶åŠ é€Ÿ**: ä½¿ç”¨ Core Animation çš„ç¡¬ä»¶åŠ é€Ÿ

## ğŸ”„ è¿ç§»æŒ‡å—

### åŸä»£ç  â†’ æ–°æ¶æ„

**ä¹‹å‰**:
```objc
// æ··ä¹±çš„åŠ¨ç”»ä»£ç æ•£å¸ƒåœ¨å„å¤„
CABasicAnimation *animation = [CABasicAnimation animationWithKeyPath:@"transform.rotation.z"];
// ... å¤§é‡é‡å¤çš„åŠ¨ç”»è®¾ç½®ä»£ç 
```

**ç°åœ¨**:
```objc
// ç®€æ´çš„æ¥å£è°ƒç”¨
[self.animationCoordinator addRotationViews:@[view] 
                                  rotations:@[@(6.0)] 
                                  durations:@[@(10.0)] 
                              rotationTypes:@[@(RotationTypeClockwise)]];
```

## ğŸ¯ ä¼˜åŠ¿

1. **æ¨¡å—åŒ–**: æ¯ç§åŠ¨ç”»ç±»å‹ç‹¬ç«‹ç®¡ç†
2. **å¯æ‰©å±•**: æ˜“äºæ·»åŠ æ–°çš„åŠ¨ç”»æ•ˆæœ
3. **å¯ç»´æŠ¤**: ä»£ç ç»“æ„æ¸…æ™°ï¼Œæ˜“äºè°ƒè¯•
4. **å¯å¤ç”¨**: åŠ¨ç”»ç»„ä»¶å¯åœ¨å…¶ä»–é¡¹ç›®ä¸­å¤ç”¨
5. **æ€§èƒ½ä¼˜åŒ–**: ç»Ÿä¸€çš„ç”Ÿå‘½å‘¨æœŸå’ŒçŠ¶æ€ç®¡ç†

## ğŸ“ æ³¨æ„äº‹é¡¹

1. ç¡®ä¿åœ¨ä¸»çº¿ç¨‹è°ƒç”¨åŠ¨ç”»ç›¸å…³æ–¹æ³•
2. åŠæ—¶å¤„ç†åº”ç”¨ç”Ÿå‘½å‘¨æœŸäº‹ä»¶
3. åˆç†è®¾ç½®åŠ¨ç”»å‚æ•°é¿å…æ€§èƒ½é—®é¢˜
4. æ³¨æ„å†…å­˜æ³„æ¼ï¼ŒåŠæ—¶ç§»é™¤è§‚å¯Ÿè€…

---

é€šè¿‡è¿™æ¬¡é‡æ„ï¼ŒåŸæœ¬æ··ä¹±çš„åŠ¨ç”»ä»£ç ç°åœ¨å˜å¾—äº•ç„¶æœ‰åºï¼Œä¸ä»…æé«˜äº†ä»£ç çš„å¯ç»´æŠ¤æ€§ï¼Œè¿˜ä¸ºæœªæ¥æ·»åŠ æ›´å¤šç‚«é…·çš„åŠ¨ç”»æ•ˆæœå¥ å®šäº†åšå®çš„åŸºç¡€ï¼ ğŸ‰

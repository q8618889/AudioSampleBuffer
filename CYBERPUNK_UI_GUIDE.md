# 赛博朋克UI控制使用指南

## 🎮 UI界面布局

```
┌─────────────────────────────────────────┐
│  🎨特效   🌌⚙️    ⚡⚙️                  │ ← 顶部控制按钮
│                                         │
│                                       🌈│
│                                       🌊│
│                                       💫│
│                                       🔮│ ← 右侧快捷特效按钮
│                                       ⚡│
│                                       🌌│
│                                         │
│       [赛博朋克效果区域]                │
│                                         │
│               ⚡ 赛博朋克控制 ✕          │ ← 控制面板（点击⚡⚙️显示）
│               ─────────────────        │
│               🔥 高能效果      [●]     │
│               🎯 调试强度条    [ ]     │
│                                         │
└─────────────────────────────────────────┘
```

---

## 🎛️ 赛博朋克控制面板

### **打开方式**
1. 点击顶部的 **⚡⚙️ 按钮**（青色按钮，位于 🌌⚙️ 右侧）
2. 控制面板会从右侧弹出

### **控制面板包含**

#### **1. 🔥 高能效果开关**
- **位置**：面板第一行
- **功能**：控制是否显示高潮特效（金橙色能量爆发）
- **默认状态**：✅ **开启**（ON）
- **效果说明**：
  - 🟢 **开启（ON）**：音乐高潮时显示金橙色爆发、冲击波、粒子雨等特殊动画
  - 🔴 **关闭（OFF）**：隐藏高潮特效，保留基础赛博朋克效果

#### **2. 🎯 调试强度条开关**
- **位置**：面板第二行
- **功能**：控制是否显示红绿蓝黄音频强度条
- **默认状态**：❌ **隐藏**（OFF）
- **效果说明**：
  - 🟢 **显示（ON）**：屏幕中央和底部显示音频调试条
    - 🔴 红条 = 低音强度（鼓点、贝斯）
    - 🟢 绿条 = 中音强度（人声、吉他）
    - 🔵 蓝条 = 高音强度（镲片、高频）
    - 🟨 黄条 = 高潮强度（isClimax）
  - 🔴 **隐藏（OFF）**：清爽观看，无任何干扰

---

## 📱 使用流程

### **场景1：正常观看音乐（默认设置）✨**
```
1. 选择赛博朋克特效（点击右侧 ⚡ 按钮）
2. 播放音乐
3. 享受完整的赛博朋克视觉体验
   - ✅ 基础效果：霓虹网格、圆环、扫描线
   - ✅ 高能效果：音乐高潮时的金橙色爆发
```

### **场景2：调试音频数据 🔍**
```
1. 点击 ⚡⚙️ 打开控制面板
2. 开启 "🎯 调试强度条"
3. 播放音乐，观察调试条跳动
   - 如果红绿蓝条跳动 → 音频数据正常 ✓
   - 如果黄条增长 → 高潮检测正常 ✓
   - 如果都不动 → 音频数据未传入 ✗
4. 调试完成后关闭调试条
```

### **场景3：降低刺眼程度 😌**
```
1. 点击 ⚡⚙️ 打开控制面板
2. 关闭 "🔥 高能效果"
3. 继续观看
   - ✅ 保留：霓虹网格、扫描线、圆环等基础效果
   - ❌ 去除：金橙色爆发、冲击波等高能动画
   - 结果：舒适的视觉体验，不刺眼
```

### **场景4：开发测试 🛠️**
```
1. 点击 ⚡⚙️ 打开控制面板
2. 两个开关都打开
   - ✅ 高能效果：测试完整功能
   - ✅ 调试条：监控音频数据
3. 实时调整和观察效果
```

---

## 🎨 按钮说明

### **控制按钮对比**

| 按钮 | 图标 | 颜色 | 功能 | 位置 |
|------|-----|------|------|------|
| 特效选择 | 🎨 特效 | 深蓝色 | 选择不同视觉效果 | 左上角第1个 |
| 星系控制 | 🌌⚙️ | 紫色 | 控制星系效果参数 | 左上角第2个 |
| **赛博朋克控制** | **⚡⚙️** | **青色** | **控制赛博朋克参数** | **左上角第3个** |

### **视觉标识**
- **⚡⚙️ 按钮特征**：
  - 背景色：青色（RGB: 0, 0.8, 0.8）
  - 边框：白色，1像素
  - 阴影：青色发光
  - 大小：80×50 像素
  - 位置：X=200, Y=50

---

## 💡 使用技巧

### **1. 快速切换**
```objective-c
// 随时点击 ⚡⚙️ 按钮切换面板显示/隐藏
// 面板会自动记住你的设置
```

### **2. 实时生效**
```
所有开关操作立即生效，无需重启或重新加载
```

### **3. 自动保存**
```
开关状态在控制面板打开时自动同步
关闭控制面板后设置依然保留
```

### **4. 调试技巧**
```
开启调试条后：
- 红条长度 = 低音强度（应该随鼓点跳动）
- 绿条长度 = 中音强度（应该随人声变化）
- 蓝条长度 = 高音强度（应该随高频音跳动）
- 黄条长度 = 高潮强度（高能段落时应该增长）

如果某条完全不动，说明该频段没有音频数据
```

---

## ⚙️ 技术细节

### **数据流**
```
UISwitch 开关
    ↓
ViewController 响应方法
    ↓
VisualEffectManager 管理方法
    ↓
CyberPunkRenderer 属性更新
    ↓
Metal Shader 读取参数
    ↓
实时渲染更新
```

### **性能影响**
| 操作 | 性能影响 | 说明 |
|------|---------|------|
| 开启高能效果 | 轻微增加 | 添加额外的特效计算 |
| 关闭高能效果 | 轻微降低 | 减少特效计算量 |
| 开启调试条 | 几乎无影响 | 只是简单绘制，非常轻量 |
| 关闭调试条 | 几乎无影响 | 跳过绘制逻辑 |

---

## 🎯 推荐配置

### **观看场景**
| 场景 | 高能效果 | 调试条 | 说明 |
|------|---------|--------|------|
| 💎 正常欣赏 | ✅ ON | ❌ OFF | 完整体验 + 无干扰 |
| 😌 舒适观看 | ❌ OFF | ❌ OFF | 柔和效果 + 不刺眼 |
| 🔍 音频调试 | ✅ ON | ✅ ON | 完整功能 + 数据可视化 |
| 🛠️ 开发测试 | ✅ ON | ✅ ON | 测试所有功能 |
| 📸 录屏展示 | ✅ ON | ❌ OFF | 最佳效果 + 无干扰 |
| 🎮 演示调试 | ✅ ON | ✅ ON | 展示技术细节 |

---

## ❓ 常见问题

### **Q: 点击⚡⚙️按钮没反应？**
A: 确保当前特效是赛博朋克效果（右侧快捷按钮的⚡）

### **Q: 开启高能效果后还是看不到？**
A: 高能效果只在音乐激烈段落才触发，试试更激烈的音乐

### **Q: 调试条不跳动？**
A: 检查音乐是否在播放，音频权限是否授予

### **Q: 控制面板挡住了效果？**
A: 点击面板右上角的 ✕ 关闭，或再次点击⚡⚙️按钮

### **Q: 设置会保存吗？**
A: 设置在应用运行期间保留，关闭应用后恢复默认值

---

## 🎉 总结

- ✅ **简单易用**：一键开关，实时生效
- ✅ **功能完整**：两个核心控制满足所有需求
- ✅ **视觉清晰**：青色主题，赛博朋克风格
- ✅ **性能优秀**：轻量级实现，几乎无性能影响
- ✅ **灵活配置**：多种使用场景，自由组合

**享受你的赛博朋克视觉体验！** ⚡✨

---

**创建日期**: 2025-10-10  
**版本**: v1.0  
**作者**: AudioSampleBuffer Team

